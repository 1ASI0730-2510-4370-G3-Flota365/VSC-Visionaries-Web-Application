"use strict";(self["webpackChunkflota365_vue"]=self["webpackChunkflota365_vue"]||[]).push([[133],{2897:(e,t,r)=>{r.d(t,{A:()=>T});r(8980),r(4114),r(4554),r(9089),r(6031);var n=r(5471),o=r(5353),c=r(9201),a=r(9258),i=(r(2008),r(2062),r(8111),r(2489),r(1701),r(6099),r(7767));const s={namespaced:!0,state:{vehicles:[],loaded:!1},getters:{allVehicles:function(e){return e.vehicles},activeVehicles:function(e){return e.vehicles.filter((function(e){return"active"===e.status}))},inactiveVehicles:function(e){return e.vehicles.filter((function(e){return"inactive"===e.status}))},vehicleCount:function(e){return e.vehicles.length}},mutations:{SET_VEHICLES:function(e,t){e.vehicles=t,e.loaded=!0},ADD_VEHICLE:function(e,t){e.vehicles.push(t)},UPDATE_VEHICLE:function(e,t){var r=e.vehicles.findIndex((function(e){return e.id===t.id}));-1!==r&&e.vehicles.splice(r,1,t)},DELETE_VEHICLE:function(e,t){e.vehicles=e.vehicles.filter((function(e){return e.id!==t}))}},actions:{fetchVehicles:function(e){var t=e.commit,r=e.state;r.loaded||(t("SET_LOADING",!0,{root:!0}),setTimeout((function(){t("SET_VEHICLES",i),t("SET_LOADING",!1,{root:!0})}),500))},addVehicle:function(e,t){var r=e.commit;return r("SET_LOADING",!0,{root:!0}),new Promise((function(e){setTimeout((function(){var n=Math.max.apply(Math,(0,a.A)(i.map((function(e){return e.id}))))+1,o=(0,c.A)((0,c.A)({},t),{},{id:n});r("ADD_VEHICLE",o),r("SET_LOADING",!1,{root:!0}),e(o)}),500)}))},updateVehicle:function(e,t){var r=e.commit;return r("SET_LOADING",!0,{root:!0}),new Promise((function(e){setTimeout((function(){r("UPDATE_VEHICLE",t),r("SET_LOADING",!1,{root:!0}),e(t)}),500)}))},deleteVehicle:function(e,t){var r=e.commit;return r("SET_LOADING",!0,{root:!0}),new Promise((function(e){setTimeout((function(){r("DELETE_VEHICLE",t),r("SET_LOADING",!1,{root:!0}),e(!0)}),500)}))}}};var u=r(4048),l=r(388),f=(r(3288),r(2505)),d=r.n(f),p=r(2802),E=!1,h=d().create({baseURL:{NODE_ENV:"production",BASE_URL:""}.VUE_APP_API_URL||"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});h.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));var v={getAll:function(){return E?p.Uo.getAll():h.get("/drivers")},getById:function(e){return E?p.Uo.getById(e):h.get("/drivers/".concat(e))},create:function(e){return E?p.Uo.create(e):h.post("/drivers",e)},update:function(e,t){return E?p.Uo.update(e,t):h.put("/drivers/".concat(e),t)},delete:function(e){return E?p.Uo["delete"](e):h["delete"]("/drivers/".concat(e))}},m={getAll:function(){return E?p.e1.getAll():h.get("/fleets")},getById:function(e){return E?p.e1.getById(e):h.get("/fleets/".concat(e))},getVehicles:function(e){return E?p.e1.getVehicles(e):h.get("/fleets/".concat(e,"/vehicles"))},create:function(e){return E?p.e1.create(e):h.post("/fleets",e)},update:function(e,t){return E?p.e1.update(e,t):h.put("/fleets/".concat(e),t)},delete:function(e){return E?p.e1["delete"](e):h["delete"]("/fleets/".concat(e))},assignVehicles:function(e,t){return E?p.e1.assignVehicles(e,{vehicleIds:t}):h.post("/fleets/".concat(e,"/vehicles"),{vehicleIds:t})}};const A={namespaced:!0,state:{drivers:[],selectedDriver:null,loaded:!1},getters:{allDrivers:function(e){return e.drivers},activeDrivers:function(e){return e.drivers.filter((function(e){return"active"===e.status}))},driverCount:function(e){return e.drivers.length},expiringLicenses:function(e){var t=new Date,r=new Date(t.getTime()+2592e6);return e.drivers.filter((function(e){var n=new Date(e.license.expiry);return n>t&&n<=r}))}},mutations:{SET_DRIVERS:function(e,t){e.drivers=t,e.loaded=!0},SET_SELECTED_DRIVER:function(e,t){e.selectedDriver=t},ADD_DRIVER:function(e,t){e.drivers.push(t)},UPDATE_DRIVER:function(e,t){var r=e.drivers.findIndex((function(e){return e.id===t.id}));-1!==r&&e.drivers.splice(r,1,t)},DELETE_DRIVER:function(e,t){e.drivers=e.drivers.filter((function(e){return e.id!==t}))}},actions:{fetchDrivers:function(e){return(0,l.A)((0,u.A)().mark((function t(){var r,n,o;return(0,u.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.state,n.loaded){t.next=19;break}return t.prev=2,r("SET_LOADING",!0,{root:!0}),t.next=6,v.getAll();case 6:return o=t.sent,r("SET_DRIVERS",o.data),t.abrupt("return",o.data);case 11:throw t.prev=11,t.t0=t["catch"](2),console.error("Error fetching drivers:",t.t0),r("showNotification",{message:"Error al obtener conductores",type:"error"},{root:!0}),t.t0;case 16:return t.prev=16,r("SET_LOADING",!1,{root:!0}),t.finish(16);case 19:return t.abrupt("return",n.drivers);case 20:case"end":return t.stop()}}),t,null,[[2,11,16,19]])})))()},fetchDriver:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,v.getById(t);case 5:return o=r.sent,n("SET_SELECTED_DRIVER",o.data),r.abrupt("return",o.data);case 10:throw r.prev=10,r.t0=r["catch"](1),console.error("Error fetching driver ".concat(t,":"),r.t0),n("showNotification",{message:"Error al obtener detalles del conductor",type:"error"},{root:!0}),r.t0;case 15:return r.prev=15,n("SET_LOADING",!1,{root:!0}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,10,15,18]])})))()},createDriver:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,v.create(t);case 5:return o=r.sent,n("ADD_DRIVER",o.data),n("showNotification",{message:"Conductor creado correctamente",type:"success"},{root:!0}),r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](1),console.error("Error creating driver:",r.t0),n("showNotification",{message:"Error al crear conductor",type:"error"},{root:!0}),r.t0;case 16:return r.prev=16,n("SET_LOADING",!1,{root:!0}),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,11,16,19]])})))()},updateDriver:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,v.update(t.id,t);case 5:return o=r.sent,n("UPDATE_DRIVER",o.data),n("showNotification",{message:"Conductor actualizado correctamente",type:"success"},{root:!0}),r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](1),console.error("Error updating driver ".concat(t.id,":"),r.t0),n("showNotification",{message:"Error al actualizar conductor",type:"error"},{root:!0}),r.t0;case 16:return r.prev=16,n("SET_LOADING",!1,{root:!0}),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,11,16,19]])})))()},deleteDriver:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,v["delete"](t);case 5:return n("DELETE_DRIVER",t),n("showNotification",{message:"Conductor eliminado correctamente",type:"success"},{root:!0}),r.abrupt("return",{success:!0});case 10:throw r.prev=10,r.t0=r["catch"](1),console.error("Error deleting driver ".concat(t,":"),r.t0),n("showNotification",{message:"Error al eliminar conductor",type:"error"},{root:!0}),r.t0;case 15:return r.prev=15,n("SET_LOADING",!1,{root:!0}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,10,15,18]])})))()}}};r(2712),r(8237);const D={namespaced:!0,state:{fleets:[],selectedFleet:null,fleetVehicles:[],loaded:!1},getters:{allFleets:function(e){return e.fleets},activeFleets:function(e){return e.fleets.filter((function(e){return"active"===e.status}))},fleetCount:function(e){return e.fleets.length},totalVehicles:function(e){return e.fleets.reduce((function(e,t){return e+t.vehicleCount}),0)}},mutations:{SET_FLEETS:function(e,t){e.fleets=t,e.loaded=!0},SET_SELECTED_FLEET:function(e,t){e.selectedFleet=t},SET_FLEET_VEHICLES:function(e,t){e.fleetVehicles=t},ADD_FLEET:function(e,t){e.fleets.push(t)},UPDATE_FLEET:function(e,t){var r=e.fleets.findIndex((function(e){return e.id===t.id}));-1!==r&&e.fleets.splice(r,1,t)},DELETE_FLEET:function(e,t){e.fleets=e.fleets.filter((function(e){return e.id!==t}))}},actions:{fetchFleets:function(e){return(0,l.A)((0,u.A)().mark((function t(){var r,n,o;return(0,u.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.commit,n=e.state,n.loaded){t.next=19;break}return t.prev=2,r("SET_LOADING",!0,{root:!0}),t.next=6,m.getAll();case 6:return o=t.sent,r("SET_FLEETS",o.data),t.abrupt("return",o.data);case 11:throw t.prev=11,t.t0=t["catch"](2),console.error("Error fetching fleets:",t.t0),r("showNotification",{message:"Error al obtener flotas",type:"error"},{root:!0}),t.t0;case 16:return t.prev=16,r("SET_LOADING",!1,{root:!0}),t.finish(16);case 19:return t.abrupt("return",n.fleets);case 20:case"end":return t.stop()}}),t,null,[[2,11,16,19]])})))()},fetchFleet:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,m.getById(t);case 5:return o=r.sent,n("SET_SELECTED_FLEET",o.data),r.abrupt("return",o.data);case 10:throw r.prev=10,r.t0=r["catch"](1),console.error("Error fetching fleet ".concat(t,":"),r.t0),n("showNotification",{message:"Error al obtener detalles de la flota",type:"error"},{root:!0}),r.t0;case 15:return r.prev=15,n("SET_LOADING",!1,{root:!0}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,10,15,18]])})))()},fetchFleetVehicles:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,m.getVehicles(t);case 5:return o=r.sent,n("SET_FLEET_VEHICLES",o.data),r.abrupt("return",o.data);case 10:throw r.prev=10,r.t0=r["catch"](1),console.error("Error fetching fleet vehicles for fleet ".concat(t,":"),r.t0),n("showNotification",{message:"Error al obtener vehículos de la flota",type:"error"},{root:!0}),r.t0;case 15:return r.prev=15,n("SET_LOADING",!1,{root:!0}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,10,15,18]])})))()},createFleet:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,m.create(t);case 5:return o=r.sent,n("ADD_FLEET",o.data),n("showNotification",{message:"Flota creada correctamente",type:"success"},{root:!0}),r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](1),console.error("Error creating fleet:",r.t0),n("showNotification",{message:"Error al crear flota",type:"error"},{root:!0}),r.t0;case 16:return r.prev=16,n("SET_LOADING",!1,{root:!0}),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,11,16,19]])})))()},updateFleet:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,m.update(t.id,t);case 5:return o=r.sent,n("UPDATE_FLEET",o.data),n("showNotification",{message:"Flota actualizada correctamente",type:"success"},{root:!0}),r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](1),console.error("Error updating fleet ".concat(t.id,":"),r.t0),n("showNotification",{message:"Error al actualizar flota",type:"error"},{root:!0}),r.t0;case 16:return r.prev=16,n("SET_LOADING",!1,{root:!0}),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,11,16,19]])})))()},deleteFleet:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,n("SET_LOADING",!0,{root:!0}),r.next=5,m["delete"](t);case 5:return n("DELETE_FLEET",t),n("showNotification",{message:"Flota eliminada correctamente",type:"success"},{root:!0}),r.abrupt("return",{success:!0});case 10:throw r.prev=10,r.t0=r["catch"](1),console.error("Error deleting fleet ".concat(t,":"),r.t0),n("showNotification",{message:"Error al eliminar flota",type:"error"},{root:!0}),r.t0;case 15:return r.prev=15,n("SET_LOADING",!1,{root:!0}),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,10,15,18]])})))()},assignVehiclesToFleet:function(e,t){return(0,l.A)((0,u.A)().mark((function r(){var n,o,c,a,i;return(0,u.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,o=t.fleetId,c=t.vehicleIds,r.prev=2,n("SET_LOADING",!0,{root:!0}),r.next=6,m.assignVehicles(o,c);case 6:return a=r.sent,r.next=9,m.getById(o);case 9:return i=r.sent,n("UPDATE_FLEET",i.data),n("showNotification",{message:"".concat(a.data.count," vehículos asignados correctamente"),type:"success"},{root:!0}),r.abrupt("return",a.data);case 15:throw r.prev=15,r.t0=r["catch"](2),console.error("Error assigning vehicles to fleet ".concat(o,":"),r.t0),n("showNotification",{message:"Error al asignar vehículos a la flota",type:"error"},{root:!0}),r.t0;case 20:return r.prev=20,n("SET_LOADING",!1,{root:!0}),r.finish(20);case 23:case"end":return r.stop()}}),r,null,[[2,15,20,23]])})))()}}};n.Ay.use(o.Ay);const T=new o.Ay.Store({state:{user:{name:"Juan Supervisor",role:"Administrador"},loading:!1,notifications:[]},mutations:{SET_LOADING:function(e,t){e.loading=t},ADD_NOTIFICATION:function(e,t){e.notifications.push(t)},REMOVE_NOTIFICATION:function(e,t){e.notifications.splice(t,1)}},actions:{showNotification:function(e,t){var r=this,n=e.commit,o=t.message,c=t.type,a=void 0===c?"info":c,i=t.duration,s=void 0===i?5e3:i,u={message:o,type:a,id:Date.now()};n("ADD_NOTIFICATION",u),s>0&&setTimeout((function(){var e=r.state.notifications.findIndex((function(e){return e.id===u.id}));-1!==e&&n("REMOVE_NOTIFICATION",e)}),s)}},modules:{vehicles:s,drivers:A,fleets:D}})},9325:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(5471),o=r(173),c=r(814),a=r(836),i=r(6305),s=r(6526),u=r(7408),l=r(2667),f=r(626),d=r(5441);n.Ay.use(o.Ay);var p=[{path:"/",name:"Dashboard",component:c.A},{path:"/login",name:"Login",component:a.A},{path:"/fleet-management",name:"FleetManagement",component:i.A},{path:"/vehicle-management",name:"VehicleManagement",component:s.A},{path:"/driver-management",name:"DriverManagement",component:u.A},{path:"/reporting",name:"Reporting",component:l.A},{path:"/monitoring",name:"Monitoring",component:f.A},{path:"/analytics",name:"Analytics",component:d.A}],E=new o.Ay({mode:"history",base:"",routes:p});E.beforeEach((function(e,t,r){r()}));const h=E}}]);